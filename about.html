<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Us - Bobble</title>
    <script src="js/password-protect.js"></script>
    <link rel="stylesheet" href="css/style.css">
    
    <script type="module">
        // Import the specific functions needed from the CDN
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

        // Your specific Firebase configuration for the Bobble project
        const firebaseConfig = {
            apiKey: "AIzaSyCm470tvi--eWD1LXpzgJpaZoVCM3XPB14",
            authDomain: "bobble-13959.firebaseapp.com",
            projectId: "bobble-13959",
            storageBucket: "bobble-13959.firebasestorage.app",
            messagingSenderId: "164832587163",
            appId: "1:164832587163:web:8ed8f747bac4b5f95cc53e"
        };

        // Initialize Firebase
        try {
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            console.log("DEBUG: Firebase initialized successfully on about.html");

            // --- Navigation Logic ---
            onAuthStateChanged(auth, (user) => {
                const authLink = document.getElementById('auth-link');
                if (user) {
                    console.log("DEBUG: User detected (" + user.email + "). Updating nav to Logout.");
                    authLink.innerHTML = '<a href="#" id="logout-btn">Logout</a>';
                    
                    document.getElementById('logout-btn').addEventListener('click', async (e) => {
                        e.preventDefault();
                        try {
                            console.log("DEBUG: Attempting logout...");
                            await signOut(auth);
                            window.location.reload();
                        } catch (error) {
                            console.error("DEBUG ERROR: Logout failed. Check internet connection.", error);
                        }
                    });
                } else {
                    console.log("DEBUG: No active session. Showing Login link.");
                    authLink.innerHTML = '<a href="login.html">Login</a>';
                }
            });

        } catch (error) {
            console.error("DEBUG ERROR: Firebase failed to load. Check if your apiKey is correct in about.html.", error);
        }
    </script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="logo">Bobble</div>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="classes.html">Classes</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="plans.html">Plans</a></li>
                <li><a href="account.html">Account</a></li>
                <li><a href="meet_the_founders.html">Founders</a></li>
                <li id="auth-link"><a href="login.html">Login</a></li>
            </ul>
        </div>
    </nav>

    <section class="about-section">
        <div class="slider-container">
            <div class="slider">
                <img class="slide active" src="images/Painting.jpeg" data-header="What is Bobble?" data-text="Bobble is a subscription service that gives you access to hundreds of classses and activities across London. Where you can go with your friends or make new ones!" data-button-text="Continue" data-button-href="#" alt="Image 1" style="transform: translateX(0%)">
                <img class="slide" src="images/Climbing.jpeg" data-header="How do the plans work?" data-text="There is an array of plans to suit your hobby needs. These plans give you credits to freely book classes. Different classes will have different credit costs depending on class type and booking time." data-button-text="Continue" data-button-href="#" alt="Image 2" style="transform: translateX(100%)">
                <img class="slide" src="images/Cooking.jpeg" data-header="Why Choose Bobble?" data-text="Bobble makes it affordable and easy to find and book classes. Plus our <strong> referral scheme </strong>  rewards you and your friend with a <strong> free class </strong> on us!" data-button-text="Continue" data-button-href="#" alt="Image 4" style="transform: translateX(300%)">
                <img class="slide" src="images/Pottery.jpeg" data-header="Something else maybe?" data-text="Your description here" data-button-text="Get Started" data-button-href="signup.html" alt="Image 3" style="transform: translateX(300%)">
            </div>
            <div class="text-box">
                <div class="text-wrapper">
                    <h1 class="about-header" id="about-header">About Bobble</h1>
                    <div class="text-content">
                        <p id="slide-text"></p>
                    </div>
                </div>
                <div class="nav-row">
                    <button class="nav-btn prev-btn" onclick="changeSlide(-1)">&#10094;</button> <!-- unicode for arrow symbol -->
                    <button class="nav-btn next-btn" onclick="changeSlide(1)">&#10095;</button>
                </div>
                <div class="dots" id="dots-container">
                    <!-- Dots generated by JavaScript -->
                </div>
                <a href="#" class="btn btn-primary" id="action-btn">Continue</a>
                <a href="signup.html" class="signup-link">Sign Up</a>
                <a href="plans.html" class="plans-link">See Plans</a>
            </div>
        </div>
    </section>
    <script src="js/menu.js"></script>
    <script src="js/about.js"></script>
</body>
</html>
