<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Classes - Bobble</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Firebase Realtime Database SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-database-compat.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="logo"><a href="index.html">Bobble</a></div>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                 <li class="dropdown">
                    <a href="classes.html" class="dropbtn">Classes</a>
                    <ul class="dropdown-menu">
                        <li><a href="classes.html">All Classes</a></li>
                        <li><a href="classes.html">Arts &amp; Crafts</a></li>
                        <li><a href="classes.html">Sports</a></li>
                    </ul>
                </li>
                <li><a href="about.html">About</a></li>
                <li><a href="account.html">Account</a></li>
                <li><a href="login.html">Login</a></li>
            </ul>
        </div>
    </nav>

    <section class="classes-section">
        <div class="container">
            <h2>Available Classes</h2>
            
            <div class="classes-grid">
                <div class="class-card">
                    <p>Loading...</p>
                </div>
            </div>
        </div>
    </section>

 <div id="footer-wrapper">
        <footer id="footer" class="container">
            <div class="row">
                <div class="col-3 col-6-medium col-12-small">
                    <section class="widget links">
                        <h3>Random Stuff</h3>
                        <ul class="style2">
                            <li><a href="#">Etiam feugiat condimentum</a></li>
                            <li><a href="#">Aliquam imperdiet suscipit odio</a></li>
                        </ul>
                    </section>
                </div>
                <div class="col-3 col-6-medium col-12-small">
                    <section class="widget contact last">
                        <h3>Contact Us</h3>
                        <p>1234 Fictional Road<br />London, UK<br />(800) 555-0000</p>
                    </section>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div id="copyright">
                        <ul class="menu">
                            <li>&copy; Bobble 2024-2026. All rights reserved</li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <script src="js/menu.js"></script>
    <script>
        // Firebase Configuration (from js/auth.js)
        const firebaseConfig = {
          apiKey: "AIzaSyCm470tvi--eWD1LXpzgJpaZoVCM3XPB14",
          authDomain: "bobble-13959.firebaseapp.com",
          projectId: "bobble-13959",
          storageBucket: "bobble-13959.firebasestorage.app",
          messagingSenderId: "164832587163",
          appId: "1:164832587163:web:8ed8f747bac4b5f95cc53e"
        };

        // Initialize Firebase Realtime Database
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Reference to the classes grid container
        const classesGrid = document.querySelector('.classes-grid');

        // Listen for classes data from Firebase Realtime Database
        database.ref('classes').on('value', (snapshot) => {
            // Clear the loading state
            classesGrid.innerHTML = '';

            const classesData = snapshot.val();

            if (classesData) {
                console.log('✓ Classes loaded successfully from Firebase:', classesData);

                // Loop through each class and render dynamically
                Object.entries(classesData).forEach(([id, classItem]) => {
                    const classCard = document.createElement('div');
                    classCard.className = 'class-card';

                    classCard.innerHTML = `
                        <h3>${classItem.name}</h3>
                        <p><strong>Instructor:</strong> ${classItem.instructor}</p>
                        <p><strong>Time:</strong> ${classItem.time}</p>
                        <p><strong>Duration:</strong> ${classItem.duration}</p>
                        <p><strong>Level:</strong> ${classItem.level}</p>
                        <a href="individual_class_template.html?id=${id}" class="btn btn-primary">Explore Classes</a>
                    `;

                    classesGrid.appendChild(classCard);
                });
            } else {
                console.log('⚠️ No classes found in database');
                classesGrid.innerHTML = '<p>No classes available at the moment.</p>';
            }
        }, (error) => {
            console.error('❌ Error loading classes:', error);
            classesGrid.innerHTML = '<p>Error loading classes. Please try again later.</p>';
        });
    </script>
</body>
</html>
